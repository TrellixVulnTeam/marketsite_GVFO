{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport { isString } from '@react-native-firebase/app/lib/common';\nimport FirebaseApp from \"../../FirebaseApp\";\nimport SDK_VERSION from \"../../version\";\nimport { DEFAULT_APP_NAME, KNOWN_NAMESPACES } from \"../constants\";\nimport FirebaseModule from \"../FirebaseModule\";\nimport { getApp, getApps, initializeApp, setOnAppCreate, setOnAppDestroy } from \"./app\";\nvar FIREBASE_ROOT = null;\nvar NAMESPACE_REGISTRY = {};\nvar APP_MODULE_INSTANCE = {};\nvar MODULE_GETTER_FOR_APP = {};\nvar MODULE_GETTER_FOR_ROOT = {};\nsetOnAppCreate(function (app) {\n  for (var i = 0; i < KNOWN_NAMESPACES.length; i++) {\n    var moduleNamespace = KNOWN_NAMESPACES[i];\n    Object.defineProperty(app, moduleNamespace, {\n      enumerable: false,\n      get: firebaseAppModuleProxy.bind(null, app, moduleNamespace)\n    });\n  }\n});\nsetOnAppDestroy(function (app) {\n  delete APP_MODULE_INSTANCE[app.name];\n  delete MODULE_GETTER_FOR_APP[app.name];\n});\n\nfunction getOrCreateModuleForApp(app, moduleNamespace) {\n  if (MODULE_GETTER_FOR_APP[app.name] && MODULE_GETTER_FOR_APP[app.name][moduleNamespace]) {\n    return MODULE_GETTER_FOR_APP[app.name][moduleNamespace];\n  }\n\n  if (!MODULE_GETTER_FOR_APP[app.name]) {\n    MODULE_GETTER_FOR_APP[app.name] = {};\n  }\n\n  var _NAMESPACE_REGISTRY$m = NAMESPACE_REGISTRY[moduleNamespace],\n      hasCustomUrlOrRegionSupport = _NAMESPACE_REGISTRY$m.hasCustomUrlOrRegionSupport,\n      hasMultiAppSupport = _NAMESPACE_REGISTRY$m.hasMultiAppSupport,\n      ModuleClass = _NAMESPACE_REGISTRY$m.ModuleClass;\n\n  if (!hasMultiAppSupport && app.name !== DEFAULT_APP_NAME) {\n    throw new Error([\"You attempted to call \\\"firebase.app('\" + app.name + \"').\" + moduleNamespace + \"\\\" but; \" + moduleNamespace + \" does not support multiple Firebase Apps.\", '', \"Ensure you access \" + moduleNamespace + \" from the default application only.\"].join('\\r\\n'));\n  }\n\n  function firebaseModuleWithArgs(customUrlOrRegion) {\n    if (customUrlOrRegion !== undefined) {\n      if (!hasCustomUrlOrRegionSupport) {}\n\n      if (!isString(customUrlOrRegion)) {}\n    }\n\n    var key = customUrlOrRegion ? customUrlOrRegion + \":\" + moduleNamespace : moduleNamespace;\n\n    if (!APP_MODULE_INSTANCE[app.name]) {\n      APP_MODULE_INSTANCE[app.name] = {};\n    }\n\n    if (!APP_MODULE_INSTANCE[app.name][key]) {\n      APP_MODULE_INSTANCE[app.name][key] = new ModuleClass(app, NAMESPACE_REGISTRY[moduleNamespace], customUrlOrRegion);\n    }\n\n    return APP_MODULE_INSTANCE[app.name][key];\n  }\n\n  MODULE_GETTER_FOR_APP[app.name][moduleNamespace] = firebaseModuleWithArgs;\n  return MODULE_GETTER_FOR_APP[app.name][moduleNamespace];\n}\n\nfunction getOrCreateModuleForRoot(moduleNamespace) {\n  if (MODULE_GETTER_FOR_ROOT[moduleNamespace]) {\n    return MODULE_GETTER_FOR_ROOT[moduleNamespace];\n  }\n\n  var _NAMESPACE_REGISTRY$m2 = NAMESPACE_REGISTRY[moduleNamespace],\n      statics = _NAMESPACE_REGISTRY$m2.statics,\n      hasMultiAppSupport = _NAMESPACE_REGISTRY$m2.hasMultiAppSupport,\n      ModuleClass = _NAMESPACE_REGISTRY$m2.ModuleClass;\n\n  function firebaseModuleWithApp(app) {\n    var _app = app || getApp();\n\n    if (!(_app instanceof FirebaseApp)) {\n      throw new Error([\"\\\"firebase.\" + moduleNamespace + \"(app)\\\" arg expects a FirebaseApp instance or undefined.\", '', 'Ensure the arg provided is a Firebase app instance; or no args to use the default Firebase app.'].join('\\r\\n'));\n    }\n\n    if (!hasMultiAppSupport && _app.name !== DEFAULT_APP_NAME) {\n      throw new Error([\"You attempted to call \\\"firebase.\" + moduleNamespace + \"(app)\\\" but; \" + moduleNamespace + \" does not support multiple Firebase Apps.\", '', \"Ensure the app provided is the default Firebase app only and not the \\\"\" + _app.name + \"\\\" app.\"].join('\\r\\n'));\n    }\n\n    if (!APP_MODULE_INSTANCE[_app.name]) {\n      APP_MODULE_INSTANCE[_app.name] = {};\n    }\n\n    if (!APP_MODULE_INSTANCE[_app.name][moduleNamespace]) {\n      APP_MODULE_INSTANCE[_app.name][moduleNamespace] = new ModuleClass(_app, NAMESPACE_REGISTRY[moduleNamespace]);\n    }\n\n    return APP_MODULE_INSTANCE[_app.name][moduleNamespace];\n  }\n\n  _extends(firebaseModuleWithApp, statics || {});\n\n  Object.freeze(firebaseModuleWithApp);\n  MODULE_GETTER_FOR_ROOT[moduleNamespace] = firebaseModuleWithApp;\n  return MODULE_GETTER_FOR_ROOT[moduleNamespace];\n}\n\nfunction firebaseRootModuleProxy(firebaseNamespace, moduleNamespace) {\n  if (NAMESPACE_REGISTRY[moduleNamespace]) {\n    return getOrCreateModuleForRoot(moduleNamespace);\n  }\n\n  throw new Error([\"You attempted to use 'firebase.\" + moduleNamespace + \"' but this module could not be found.\", '', \"Ensure you have installed and imported the '@react-native-firebase/\" + moduleNamespace + \"' package.\"].join('\\r\\n'));\n}\n\nexport function firebaseAppModuleProxy(app, moduleNamespace) {\n  if (NAMESPACE_REGISTRY[moduleNamespace]) {\n    app._checkDestroyed();\n\n    return getOrCreateModuleForApp(app, moduleNamespace);\n  }\n\n  throw new Error([\"You attempted to use \\\"firebase.app('\" + app.name + \"').\" + moduleNamespace + \"\\\" but this module could not be found.\", '', \"Ensure you have installed and imported the '@react-native-firebase/\" + moduleNamespace + \"' package.\"].join('\\r\\n'));\n}\nexport function createFirebaseRoot() {\n  FIREBASE_ROOT = {\n    initializeApp: initializeApp,\n\n    get app() {\n      return getApp;\n    },\n\n    get apps() {\n      return getApps();\n    },\n\n    SDK_VERSION: SDK_VERSION\n  };\n\n  for (var i = 0; i < KNOWN_NAMESPACES.length; i++) {\n    var namespace = KNOWN_NAMESPACES[i];\n    Object.defineProperty(FIREBASE_ROOT, namespace, {\n      enumerable: false,\n      get: firebaseRootModuleProxy.bind(null, FIREBASE_ROOT, namespace)\n    });\n  }\n\n  return FIREBASE_ROOT;\n}\nexport function getFirebaseRoot() {\n  if (FIREBASE_ROOT) {\n    return FIREBASE_ROOT;\n  }\n\n  return createFirebaseRoot();\n}\nexport function createModuleNamespace() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var namespace = options.namespace,\n      ModuleClass = options.ModuleClass;\n\n  if (!NAMESPACE_REGISTRY[namespace]) {\n    if (FirebaseModule.__extended__ !== ModuleClass.__extended__) {\n      throw new Error('INTERNAL ERROR: ModuleClass must be an instance of FirebaseModule.');\n    }\n\n    NAMESPACE_REGISTRY[namespace] = _extends({}, options);\n  }\n\n  return getFirebaseRoot()[namespace];\n}","map":{"version":3,"sources":["D:/marketsite/node_modules/@react-native-firebase/app/lib/internal/registry/namespace.js"],"names":["isString","FirebaseApp","SDK_VERSION","DEFAULT_APP_NAME","KNOWN_NAMESPACES","FirebaseModule","getApp","getApps","initializeApp","setOnAppCreate","setOnAppDestroy","FIREBASE_ROOT","NAMESPACE_REGISTRY","APP_MODULE_INSTANCE","MODULE_GETTER_FOR_APP","MODULE_GETTER_FOR_ROOT","app","i","length","moduleNamespace","Object","defineProperty","enumerable","get","firebaseAppModuleProxy","bind","name","getOrCreateModuleForApp","hasCustomUrlOrRegionSupport","hasMultiAppSupport","ModuleClass","Error","join","firebaseModuleWithArgs","customUrlOrRegion","undefined","key","getOrCreateModuleForRoot","statics","firebaseModuleWithApp","_app","freeze","firebaseRootModuleProxy","firebaseNamespace","_checkDestroyed","createFirebaseRoot","apps","namespace","getFirebaseRoot","createModuleNamespace","options","__extended__"],"mappings":"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","sourcesContent":["/*\r\n * Copyright (c) 2016-present Invertase Limited & Contributors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this library except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n *\r\n */\r\n\r\nimport { isString } from '@react-native-firebase/app/lib/common';\r\nimport FirebaseApp from '../../FirebaseApp';\r\nimport SDK_VERSION from '../../version';\r\nimport { DEFAULT_APP_NAME, KNOWN_NAMESPACES } from '../constants';\r\nimport FirebaseModule from '../FirebaseModule';\r\nimport { getApp, getApps, initializeApp, setOnAppCreate, setOnAppDestroy } from './app';\r\n\r\n// firebase.X\r\nlet FIREBASE_ROOT = null;\r\n\r\nconst NAMESPACE_REGISTRY = {};\r\nconst APP_MODULE_INSTANCE = {};\r\nconst MODULE_GETTER_FOR_APP = {};\r\nconst MODULE_GETTER_FOR_ROOT = {};\r\n\r\n/**\r\n * Attaches module namespace getters on every newly created app.\r\n *\r\n * Structured like this to avoid metro require cycles.\r\n */\r\nsetOnAppCreate(app => {\r\n  for (let i = 0; i < KNOWN_NAMESPACES.length; i++) {\r\n    const moduleNamespace = KNOWN_NAMESPACES[i];\r\n    Object.defineProperty(app, moduleNamespace, {\r\n      enumerable: false,\r\n      get: firebaseAppModuleProxy.bind(null, app, moduleNamespace),\r\n    });\r\n  }\r\n});\r\n\r\n/**\r\n * Destroys all APP_MODULE_INSTANCE & MODULE_GETTER_FOR_APP objects relating to the\r\n * recently destroyed app.\r\n *\r\n * Structured like this to avoid metro require cycles.\r\n */\r\nsetOnAppDestroy(app => {\r\n  delete APP_MODULE_INSTANCE[app.name];\r\n  delete MODULE_GETTER_FOR_APP[app.name];\r\n});\r\n\r\n/**\r\n *\r\n * @param app\r\n * @param moduleNamespace\r\n * @returns {*}\r\n */\r\nfunction getOrCreateModuleForApp(app, moduleNamespace) {\r\n  if (MODULE_GETTER_FOR_APP[app.name] && MODULE_GETTER_FOR_APP[app.name][moduleNamespace]) {\r\n    return MODULE_GETTER_FOR_APP[app.name][moduleNamespace];\r\n  }\r\n\r\n  if (!MODULE_GETTER_FOR_APP[app.name]) {\r\n    MODULE_GETTER_FOR_APP[app.name] = {};\r\n  }\r\n\r\n  const { hasCustomUrlOrRegionSupport, hasMultiAppSupport, ModuleClass } = NAMESPACE_REGISTRY[\r\n    moduleNamespace\r\n  ];\r\n\r\n  // modules such as analytics only run on the default app\r\n  if (!hasMultiAppSupport && app.name !== DEFAULT_APP_NAME) {\r\n    throw new Error(\r\n      [\r\n        `You attempted to call \"firebase.app('${app.name}').${moduleNamespace}\" but; ${moduleNamespace} does not support multiple Firebase Apps.`,\r\n        '',\r\n        `Ensure you access ${moduleNamespace} from the default application only.`,\r\n      ].join('\\r\\n'),\r\n    );\r\n  }\r\n\r\n  // e.g. firebase.storage(customUrlOrRegion)\r\n  function firebaseModuleWithArgs(customUrlOrRegion) {\r\n    if (customUrlOrRegion !== undefined) {\r\n      if (!hasCustomUrlOrRegionSupport) {\r\n        // TODO throw Module does not support arguments error\r\n      }\r\n\r\n      if (!isString(customUrlOrRegion)) {\r\n        // TODO throw Module first argument must be a string error\r\n      }\r\n    }\r\n\r\n    const key = customUrlOrRegion ? `${customUrlOrRegion}:${moduleNamespace}` : moduleNamespace;\r\n\r\n    if (!APP_MODULE_INSTANCE[app.name]) {\r\n      APP_MODULE_INSTANCE[app.name] = {};\r\n    }\r\n\r\n    if (!APP_MODULE_INSTANCE[app.name][key]) {\r\n      APP_MODULE_INSTANCE[app.name][key] = new ModuleClass(\r\n        app,\r\n        NAMESPACE_REGISTRY[moduleNamespace],\r\n        customUrlOrRegion,\r\n      );\r\n    }\r\n\r\n    return APP_MODULE_INSTANCE[app.name][key];\r\n  }\r\n\r\n  MODULE_GETTER_FOR_APP[app.name][moduleNamespace] = firebaseModuleWithArgs;\r\n  return MODULE_GETTER_FOR_APP[app.name][moduleNamespace];\r\n}\r\n\r\n/**\r\n *\r\n * @param moduleNamespace\r\n * @returns {*}\r\n */\r\nfunction getOrCreateModuleForRoot(moduleNamespace) {\r\n  if (MODULE_GETTER_FOR_ROOT[moduleNamespace]) {\r\n    return MODULE_GETTER_FOR_ROOT[moduleNamespace];\r\n  }\r\n\r\n  const { statics, hasMultiAppSupport, ModuleClass } = NAMESPACE_REGISTRY[moduleNamespace];\r\n\r\n  // e.g. firebase.storage(app)\r\n  function firebaseModuleWithApp(app) {\r\n    const _app = app || getApp();\r\n\r\n    if (!(_app instanceof FirebaseApp)) {\r\n      throw new Error(\r\n        [\r\n          `\"firebase.${moduleNamespace}(app)\" arg expects a FirebaseApp instance or undefined.`,\r\n          '',\r\n          'Ensure the arg provided is a Firebase app instance; or no args to use the default Firebase app.',\r\n        ].join('\\r\\n'),\r\n      );\r\n    }\r\n\r\n    // modules such as analytics only run on the default app\r\n    if (!hasMultiAppSupport && _app.name !== DEFAULT_APP_NAME) {\r\n      throw new Error(\r\n        [\r\n          `You attempted to call \"firebase.${moduleNamespace}(app)\" but; ${moduleNamespace} does not support multiple Firebase Apps.`,\r\n          '',\r\n          `Ensure the app provided is the default Firebase app only and not the \"${_app.name}\" app.`,\r\n        ].join('\\r\\n'),\r\n      );\r\n    }\r\n\r\n    if (!APP_MODULE_INSTANCE[_app.name]) {\r\n      APP_MODULE_INSTANCE[_app.name] = {};\r\n    }\r\n\r\n    if (!APP_MODULE_INSTANCE[_app.name][moduleNamespace]) {\r\n      APP_MODULE_INSTANCE[_app.name][moduleNamespace] = new ModuleClass(\r\n        _app,\r\n        NAMESPACE_REGISTRY[moduleNamespace],\r\n      );\r\n    }\r\n\r\n    return APP_MODULE_INSTANCE[_app.name][moduleNamespace];\r\n  }\r\n\r\n  Object.assign(firebaseModuleWithApp, statics || {});\r\n  Object.freeze(firebaseModuleWithApp);\r\n  MODULE_GETTER_FOR_ROOT[moduleNamespace] = firebaseModuleWithApp;\r\n\r\n  return MODULE_GETTER_FOR_ROOT[moduleNamespace];\r\n}\r\n\r\n/**\r\n *\r\n * @param firebaseNamespace\r\n * @param moduleNamespace\r\n * @returns {*}\r\n */\r\nfunction firebaseRootModuleProxy(firebaseNamespace, moduleNamespace) {\r\n  if (NAMESPACE_REGISTRY[moduleNamespace]) {\r\n    return getOrCreateModuleForRoot(moduleNamespace);\r\n  }\r\n\r\n  throw new Error(\r\n    [\r\n      `You attempted to use 'firebase.${moduleNamespace}' but this module could not be found.`,\r\n      '',\r\n      `Ensure you have installed and imported the '@react-native-firebase/${moduleNamespace}' package.`,\r\n    ].join('\\r\\n'),\r\n  );\r\n}\r\n\r\n/**\r\n *\r\n * @param app\r\n * @param moduleNamespace\r\n * @returns {*}\r\n */\r\nexport function firebaseAppModuleProxy(app, moduleNamespace) {\r\n  if (NAMESPACE_REGISTRY[moduleNamespace]) {\r\n    app._checkDestroyed();\r\n    return getOrCreateModuleForApp(app, moduleNamespace);\r\n  }\r\n\r\n  throw new Error(\r\n    [\r\n      `You attempted to use \"firebase.app('${app.name}').${moduleNamespace}\" but this module could not be found.`,\r\n      '',\r\n      `Ensure you have installed and imported the '@react-native-firebase/${moduleNamespace}' package.`,\r\n    ].join('\\r\\n'),\r\n  );\r\n}\r\n\r\n/**\r\n *\r\n * @returns {*}\r\n */\r\nexport function createFirebaseRoot() {\r\n  FIREBASE_ROOT = {\r\n    initializeApp,\r\n    get app() {\r\n      return getApp;\r\n    },\r\n    get apps() {\r\n      return getApps();\r\n    },\r\n    SDK_VERSION,\r\n  };\r\n\r\n  for (let i = 0; i < KNOWN_NAMESPACES.length; i++) {\r\n    const namespace = KNOWN_NAMESPACES[i];\r\n    Object.defineProperty(FIREBASE_ROOT, namespace, {\r\n      enumerable: false,\r\n      get: firebaseRootModuleProxy.bind(null, FIREBASE_ROOT, namespace),\r\n    });\r\n  }\r\n\r\n  return FIREBASE_ROOT;\r\n}\r\n\r\n/**\r\n *\r\n * @returns {*}\r\n */\r\nexport function getFirebaseRoot() {\r\n  if (FIREBASE_ROOT) {\r\n    return FIREBASE_ROOT;\r\n  }\r\n  return createFirebaseRoot();\r\n}\r\n\r\n/**\r\n *\r\n * @param options\r\n * @returns {*}\r\n */\r\nexport function createModuleNamespace(options = {}) {\r\n  const { namespace, ModuleClass } = options;\r\n\r\n  if (!NAMESPACE_REGISTRY[namespace]) {\r\n    // validation only for internal / module dev usage\r\n    if (FirebaseModule.__extended__ !== ModuleClass.__extended__) {\r\n      throw new Error('INTERNAL ERROR: ModuleClass must be an instance of FirebaseModule.');\r\n    }\r\n\r\n    NAMESPACE_REGISTRY[namespace] = Object.assign({}, options);\r\n  }\r\n\r\n  return getFirebaseRoot()[namespace];\r\n}\r\n"]},"metadata":{},"sourceType":"module"}